import{j as e,Q as Ee,a as Ae}from"./state-vendor-Cmy80tuL.js";import{a as Te,r,u as De,L as $e,B as ze,R as Me,b as X,c as Ne}from"./react-vendor-Bn0YOEgN.js";import{G as Re,C as Ie,D as ue,A as J,Z as ee,S as ce,a as ae,V as re,b as H,W as be,c as ye,d as se,H as Le,e as Fe,M as we,f as ne,B as Oe,g as Ue,h as Y,R as Se,P as ke,X as Q,i as ie,j as Be,k as We,l as qe,m as Ge,n as Ve,o as te,p as le,T as He,E as he,q as Je,r as pe,U as Qe,s as ge,t as je,F as Xe,L as oe,u as Ke}from"./ui-vendor-Bckq4wYg.js";(function(){const m=document.createElement("link").relList;if(m&&m.supports&&m.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))g(c);new MutationObserver(c=>{for(const p of c)if(p.type==="childList")for(const h of p.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&g(h)}).observe(document,{childList:!0,subtree:!0});function d(c){const p={};return c.integrity&&(p.integrity=c.integrity),c.referrerPolicy&&(p.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?p.credentials="include":c.crossOrigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function g(c){if(c.ep)return;c.ep=!0;const p=d(c);fetch(c.href,p)}})();var me={},ve=Te;me.createRoot=ve.createRoot,me.hydrateRoot=ve.hydrateRoot;const Ye=({agents:l,tasks:m,hooks:d,lastAudio:g,isConnected:c,enableWebSocket:p=!0,wsUrl:h="ws://localhost:8087",theme:f="tokyo-night",showPerformanceMetrics:i=!0,compactMode:_=!1})=>{const[C,u]=r.useState(null),[M,A]=r.useState(null),[T,P]=r.useState("disconnected"),[D,S]=r.useState(0),[R,I]=r.useState(0),L=r.useCallback(()=>{if(p)try{P("connecting");const b=new WebSocket(h);b.onopen=()=>{console.log("🔗 Ultimate Statusline WebSocket connected"),P("connected"),A(b),b.send(JSON.stringify({type:"request_update"}))},b.onmessage=$=>{try{const W=JSON.parse($.data);if(W.type==="statusline_update"||W.type==="statusline_initial"){const s=W.data;u(s),S(Date.now()),s.performance&&R>0&&(s.performance.renderTime=Date.now()-R)}}catch(W){console.error("Error parsing statusline message:",W)}},b.onclose=()=>{console.log("🔌 Ultimate Statusline WebSocket disconnected"),P("disconnected"),A(null),setTimeout(L,3e3)},b.onerror=$=>{console.error("🚨 Ultimate Statusline WebSocket error:",$),P("disconnected")}}catch(b){console.error("Failed to create WebSocket connection:",b),P("disconnected")}},[p,h]);r.useEffect(()=>(L(),()=>{M&&M.close()}),[L]),r.useEffect(()=>{I(Date.now())});const O=T==="connected",a=C||k();function k(){return{powerline:{directory:"Claude_Code_Dev_Stack_v3",git:{branch:"main",dirty:!1,ahead:0,behind:0,stash:0},model:{id:"claude-3-5-sonnet",displayName:"Claude 3.5 Sonnet",provider:"Anthropic"},cost:{session:l?2.45:0,today:l?8.32:0,budget:25,remaining:16.68,percentage:33.28},context:{tokens:45e3,maxTokens:2e5,percentage:22.5},performance:{responseTime:0,throughput:0,avgResponseTime:0}},devStack:{agents:{active:(l==null?void 0:l.active)||0,total:(l==null?void 0:l.total)||28,status:(l==null?void 0:l.status)||"idle",byType:{},performance:{avgResponseTime:0,successRate:100,errorCount:0}},tasks:{active:(m==null?void 0:m.active)||0,completed:(m==null?void 0:m.completed)||0,total:(m==null?void 0:m.total)||0,queued:0,failed:0,status:(m==null?void 0:m.status)||"none",performance:{avgExecutionTime:0,throughput:0,queueDepth:0}},hooks:{triggered:(d==null?void 0:d.triggered)||0,total:(d==null?void 0:d.total)||28,errors:(d==null?void 0:d.errors)||0,active:0,status:(d==null?void 0:d.status)||"ready",performance:{avgLatency:0,successRate:100,concurrentHooks:0}},audio:{enabled:g!=="none",volume:.5,lastEvent:g||"none",status:"silent",queue:0,performance:{latency:0,queuedEvents:0,eventRate:0}},system:{cpu:0,memory:0,disk:0,network:{bytesIn:0,bytesOut:0,latency:0}}},performance:{updateLatency:0,dataCollectionTime:0,renderTime:0,wsLatency:0,memoryUsage:0,cpuUsage:0},timestamp:Date.now(),updateId:"fallback"}}const o=(b,$)=>{const W=b/$*100;return W>=80?"text-red-500":W>=60?"text-yellow-500":"text-green-500"},x=b=>{switch(b){case"working":case"running":case"busy":return"text-green-500";case"error":return"text-red-500";case"playing":return"text-blue-500";case"idle":case"ready":case"silent":case"none":default:return"text-gray-500"}},N=b=>{switch(b){case"working":case"running":case"busy":return"●";case"error":return"⚠";case"playing":return"▶";case"idle":case"ready":case"silent":case"none":default:return"○"}},y=b=>{if(b===0)return"0 B";const $=1024,W=["B","KB","MB","GB"],s=Math.floor(Math.log(b)/Math.log($));return parseFloat((b/Math.pow($,s)).toFixed(1))+" "+W[s]};return e.jsxs("div",{className:`statusline statusline-theme-${f} ${_?"compact":""}`,children:[e.jsxs("div",{className:"statusline-row powerline",children:[e.jsxs("div",{className:"segment directory",children:[e.jsx("span",{className:"icon",children:"📁"}),e.jsx("span",{className:"value",children:a.powerline.directory})]}),e.jsxs("div",{className:"segment git",children:[e.jsx(Re,{size:14}),e.jsx("span",{className:"value",children:a.powerline.git.branch}),a.powerline.git.dirty&&e.jsx("span",{className:"status-indicator text-yellow-500",children:"●"}),(a.powerline.git.ahead>0||a.powerline.git.behind>0)&&e.jsxs("span",{className:"status-indicator text-blue-500",children:[a.powerline.git.ahead>0&&`↑${a.powerline.git.ahead}`,a.powerline.git.behind>0&&`↓${a.powerline.git.behind}`]}),a.powerline.git.stash>0&&e.jsxs("span",{className:"status-indicator text-purple-500",children:["⧇",a.powerline.git.stash]})]}),e.jsxs("div",{className:"segment model",children:[e.jsx(Ie,{size:14}),e.jsx("span",{className:"value",children:a.powerline.model.displayName}),a.powerline.model.provider&&e.jsxs("span",{className:"provider text-xs text-gray-400",children:["(",a.powerline.model.provider,")"]})]}),e.jsxs("div",{className:`segment cost ${o(a.powerline.cost.session,a.powerline.cost.budget*.4)}`,children:[e.jsx(ue,{size:14}),e.jsxs("span",{className:"value",children:["Session: $",a.powerline.cost.session.toFixed(2)]})]}),e.jsxs("div",{className:`segment cost ${o(a.powerline.cost.today,a.powerline.cost.budget)}`,children:[e.jsx(ue,{size:14}),e.jsxs("span",{className:"value",children:["Today: $",a.powerline.cost.today.toFixed(2),"/$",a.powerline.cost.budget]}),e.jsx("div",{className:"progress-bar mini",children:e.jsx("div",{className:"progress-fill",style:{width:`${a.powerline.cost.percentage}%`}})})]}),e.jsxs("div",{className:"segment context",children:[e.jsx(J,{size:14}),e.jsxs("span",{className:"value",children:[(a.powerline.context.tokens/1e3).toFixed(1),"k tokens"]}),e.jsx("div",{className:"progress-bar mini",children:e.jsx("div",{className:"progress-fill",style:{width:`${a.powerline.context.percentage}%`}})})]})]}),e.jsxs("div",{className:"statusline-row devstack",children:[e.jsxs("div",{className:"segment agents",children:[e.jsx("span",{className:"icon",children:"🤖"}),e.jsxs("span",{className:`value ${x(a.devStack.agents.status)}`,children:[a.devStack.agents.active,"/",a.devStack.agents.total]}),e.jsx("span",{className:`status-indicator ${x(a.devStack.agents.status)}`,children:N(a.devStack.agents.status)}),a.devStack.agents.performance.errorCount>0&&e.jsxs("span",{className:"error-count text-red-500",children:["⚠",a.devStack.agents.performance.errorCount]})]}),e.jsxs("div",{className:"segment tasks",children:[e.jsx(ee,{size:14}),e.jsxs("span",{className:`value ${x(a.devStack.tasks.status)}`,children:[a.devStack.tasks.active,"/",a.devStack.tasks.total,"(",a.devStack.tasks.completed," done)"]}),a.devStack.tasks.queued>0&&e.jsxs("span",{className:"queue-indicator text-orange-500",children:["Q:",a.devStack.tasks.queued]}),e.jsx("span",{className:`status-indicator ${x(a.devStack.tasks.status)}`,children:N(a.devStack.tasks.status)})]}),e.jsxs("div",{className:"segment hooks",children:[e.jsx(ce,{size:14}),e.jsxs("span",{className:`value ${x(a.devStack.hooks.status)}`,children:[a.devStack.hooks.triggered,"/",a.devStack.hooks.total]}),a.devStack.hooks.errors>0&&e.jsxs("span",{className:"status-indicator text-red-500",children:[e.jsx(ae,{size:12}),a.devStack.hooks.errors]}),e.jsx("span",{className:`status-indicator ${x(a.devStack.hooks.status)}`,children:N(a.devStack.hooks.status)})]}),e.jsxs("div",{className:"segment audio",children:[e.jsx(re,{size:14}),e.jsxs("span",{className:`value ${x(a.devStack.audio.status)}`,children:[a.devStack.audio.enabled?`${Math.round(a.devStack.audio.volume*100)}%`:"Off",a.devStack.audio.queue>0&&` (Q:${a.devStack.audio.queue})`]}),e.jsx("span",{className:`status-indicator ${x(a.devStack.audio.status)}`,children:a.devStack.audio.enabled?"🔊":"🔇"}),e.jsx("span",{className:"last-event text-xs text-gray-400",children:a.devStack.audio.lastEvent})]}),e.jsxs("div",{className:"segment system",children:[e.jsx(H,{size:14}),e.jsxs("span",{className:"value text-gray-600",children:["CPU:",a.devStack.system.cpu.toFixed(1),"% MEM:",a.devStack.system.memory.toFixed(1),"%"]})]}),e.jsx("div",{className:"segment connection",children:O?e.jsxs(e.Fragment,{children:[e.jsx(be,{size:14,className:"text-green-500"}),e.jsxs("span",{className:"value text-green-500",children:[a.performance.updateLatency,"ms"]})]}):e.jsxs(e.Fragment,{children:[e.jsx(ye,{size:14,className:"text-red-500"}),e.jsx("span",{className:"value text-red-500",children:T})]})}),e.jsxs("div",{className:"segment timestamp",children:[e.jsx(se,{size:14}),e.jsx("span",{className:"value text-gray-400",children:new Date(a.timestamp).toLocaleTimeString()})]})]}),i&&e.jsxs("div",{className:"statusline-row performance",children:[e.jsxs("div",{className:"segment perf-update",children:[e.jsx(J,{size:12}),e.jsx("span",{className:"label",children:"Update:"}),e.jsxs("span",{className:"value",children:[a.performance.updateLatency,"ms"]})]}),e.jsxs("div",{className:"segment perf-data",children:[e.jsx("span",{className:"label",children:"Data:"}),e.jsxs("span",{className:"value",children:[a.performance.dataCollectionTime,"ms"]})]}),e.jsxs("div",{className:"segment perf-render",children:[e.jsx("span",{className:"label",children:"Render:"}),e.jsxs("span",{className:"value",children:[a.performance.renderTime,"ms"]})]}),e.jsxs("div",{className:"segment perf-memory",children:[e.jsx("span",{className:"label",children:"Memory:"}),e.jsx("span",{className:"value",children:y(a.performance.memoryUsage*1024*1024)})]}),e.jsxs("div",{className:"segment update-id",children:[e.jsx("span",{className:"label",children:"ID:"}),e.jsx("span",{className:"value text-xs font-mono",children:a.updateId.slice(-8)})]}),e.jsx("div",{className:"segment attribution",children:e.jsx("span",{className:"value text-xs text-gray-500",children:"@Owloops/claude-powerline + Dev Stack v3.0 by Zach"})})]})]})},Ze=()=>{const l=De(),m=[{path:"/",label:"Dashboard",icon:Le},{path:"/tasks",label:"Tasks",icon:Fe},{path:"/audio",label:"Audio",icon:re},{path:"/mcp",label:"MCP",icon:H},{path:"/browser",label:"Browser",icon:we},{path:"/api-generator",label:"API Gen",icon:ne}];return e.jsx("nav",{className:"navigation",children:e.jsx("div",{className:"nav-container",children:m.map(({path:d,label:g,icon:c})=>e.jsxs($e,{to:d,className:`nav-item ${l.pathname===d?"active":""}`,children:[e.jsx(c,{size:16}),e.jsx("span",{children:g})]},d))})})},es=({agents:l})=>{const m=[{id:"agent-prod-frontend",name:"Production Frontend Agent",status:"active",description:"Building production-grade React applications",tasksCompleted:12,uptime:"2h 15m",performance:95},{id:"agent-testing-automation",name:"Testing Automation Agent",status:"active",description:"Automated testing and quality assurance",tasksCompleted:8,uptime:"1h 45m",performance:98},{id:"agent-ui-ux-design",name:"UI/UX Design Agent",status:"idle",description:"User interface and experience design",tasksCompleted:5,uptime:"30m",performance:87},{id:"agent-mobile-development",name:"Mobile Development Agent",status:"active",description:"Cross-platform mobile app development",tasksCompleted:15,uptime:"3h 20m",performance:92},{id:"agent-backend-development",name:"Backend Development Agent",status:"error",description:"Server-side development and APIs",tasksCompleted:3,uptime:"15m",performance:45},{id:"agent-devops-engineering",name:"DevOps Engineering Agent",status:"active",description:"Infrastructure and deployment automation",tasksCompleted:7,uptime:"1h 30m",performance:89}],d=c=>{switch(c){case"active":return e.jsx(Y,{size:16,className:"text-green-500"});case"idle":return e.jsx(se,{size:16,className:"text-yellow-500"});case"error":return e.jsx(Ue,{size:16,className:"text-red-500"});default:return e.jsx(J,{size:16,className:"text-gray-500"})}},g=c=>c>=90?"text-green-500":c>=70?"text-yellow-500":"text-red-500";return e.jsxs("div",{className:"agent-dashboard",children:[e.jsxs("div",{className:"card",style:{gridColumn:"1 / -1"},children:[e.jsxs("div",{className:"card-header",children:[e.jsxs("h2",{className:"card-title",children:[e.jsx(Oe,{size:20}),"Agent Dashboard"]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsxs("span",{className:"text-success",children:["Active: ",l.active]}),e.jsxs("span",{className:"text-muted",children:["Total: ",l.total]})]})]}),e.jsx("div",{className:"card-content",children:e.jsx("p",{children:"Real-time monitoring of all Claude Code Dev Stack agents"})})]}),m.map(c=>e.jsxs("div",{className:"agent-card",children:[e.jsxs("div",{className:"agent-status",children:[d(c.status),e.jsx("span",{className:"font-medium",children:c.name})]}),e.jsx("p",{className:"text-sm text-secondary mb-3",children:c.description}),e.jsxs("div",{className:"agent-metrics",children:[e.jsxs("div",{className:"metric",children:[e.jsx("div",{className:"metric-value",children:c.tasksCompleted}),e.jsx("div",{className:"metric-label",children:"Tasks"})]}),e.jsxs("div",{className:"metric",children:[e.jsx("div",{className:"metric-value",children:c.uptime}),e.jsx("div",{className:"metric-label",children:"Uptime"})]}),e.jsxs("div",{className:"metric",style:{gridColumn:"1 / -1"},children:[e.jsxs("div",{className:`metric-value ${g(c.performance)}`,children:[c.performance,"%"]}),e.jsx("div",{className:"metric-label",children:"Performance"})]})]}),e.jsx("div",{className:"mt-3",children:e.jsx("div",{className:"task-progress",children:e.jsx("div",{className:"task-progress-bar",style:{width:`${c.performance}%`}})})})]},c.id)),e.jsxs("div",{className:"card",style:{gridColumn:"1 / -1"},children:[e.jsx("div",{className:"card-header",children:e.jsxs("h3",{className:"card-title",children:[e.jsx(J,{size:18}),"System Overview"]})}),e.jsx("div",{className:"card-content",children:e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{className:"metric",children:[e.jsx("div",{className:"metric-value text-green-500",children:m.filter(c=>c.status==="active").length}),e.jsx("div",{className:"metric-label",children:"Active Agents"})]}),e.jsxs("div",{className:"metric",children:[e.jsx("div",{className:"metric-value text-yellow-500",children:m.filter(c=>c.status==="idle").length}),e.jsx("div",{className:"metric-label",children:"Idle Agents"})]}),e.jsxs("div",{className:"metric",children:[e.jsx("div",{className:"metric-value text-red-500",children:m.filter(c=>c.status==="error").length}),e.jsx("div",{className:"metric-label",children:"Error Agents"})]}),e.jsxs("div",{className:"metric",children:[e.jsx("div",{className:"metric-value text-blue-500",children:m.reduce((c,p)=>c+p.tasksCompleted,0)}),e.jsx("div",{className:"metric-label",children:"Total Tasks"})]})]})})]})]})},ss=({tasks:l})=>{const[m,d]=r.useState("all"),g=[{id:"task-1",name:"Build React Components",description:"Creating reusable UI components for the dashboard",status:"completed",progress:100,startTime:"2 hours ago",estimatedDuration:"45 minutes",agent:"agent-prod-frontend"},{id:"task-2",name:"Setup PWA Configuration",description:"Configuring service worker and manifest for PWA support",status:"running",progress:75,startTime:"30 minutes ago",estimatedDuration:"20 minutes",agent:"agent-prod-frontend"},{id:"task-3",name:"Generate Test Suite",description:"Creating comprehensive unit and integration tests",status:"running",progress:45,startTime:"15 minutes ago",estimatedDuration:"1 hour",agent:"agent-testing-automation"},{id:"task-4",name:"Design Mobile Layout",description:"Creating responsive mobile-first design patterns",status:"pending",progress:0,startTime:"Not started",estimatedDuration:"1.5 hours",agent:"agent-ui-ux-design"},{id:"task-5",name:"API Integration",description:"Connecting frontend with backend services",status:"error",progress:25,startTime:"1 hour ago",estimatedDuration:"30 minutes",agent:"agent-backend-development"},{id:"task-6",name:"Deploy to Production",description:"Setting up CI/CD pipeline and deployment",status:"pending",progress:0,startTime:"Not started",estimatedDuration:"45 minutes",agent:"agent-devops-engineering"}],c=i=>{switch(i){case"completed":return e.jsx(Y,{size:16,className:"text-green-500"});case"running":return e.jsx(ie,{size:16,className:"text-blue-500"});case"pending":return e.jsx(se,{size:16,className:"text-yellow-500"});case"error":return e.jsx(Q,{size:16,className:"text-red-500"});default:return e.jsx(ke,{size:16,className:"text-gray-500"})}},p=i=>{switch(i){case"completed":return"completed";case"error":return"error";default:return""}},h=m==="all"?g:g.filter(i=>i.status===m),f={all:g.length,running:g.filter(i=>i.status==="running").length,completed:g.filter(i=>i.status==="completed").length,pending:g.filter(i=>i.status==="pending").length,error:g.filter(i=>i.status==="error").length};return e.jsxs("div",{className:"task-monitor",children:[e.jsxs("div",{className:"card-header",children:[e.jsxs("h2",{className:"card-title",children:[e.jsx(ee,{size:20}),"Task Monitor"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm text-muted",children:[l.completed,"/",l.total," completed"]}),e.jsx("button",{className:"btn btn-secondary",onClick:()=>window.location.reload(),children:e.jsx(Se,{size:14})})]})]}),e.jsx("div",{className:"mb-4",children:e.jsx("div",{className:"flex gap-2 flex-wrap",children:Object.entries(f).map(([i,_])=>e.jsxs("button",{onClick:()=>d(i),className:`btn ${m===i?"btn-primary":"btn-secondary"} text-sm`,children:[i.charAt(0).toUpperCase()+i.slice(1)," (",_,")"]},i))})}),e.jsxs("div",{className:"task-list",children:[h.map(i=>e.jsxs("div",{className:`task-item ${p(i.status)}`,children:[e.jsxs("div",{className:"task-info",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[c(i.status),e.jsx("span",{className:"task-name",children:i.name}),e.jsx("span",{className:"text-xs text-muted bg-tertiary px-2 py-1 rounded",children:i.agent.replace("agent-","")})]}),e.jsx("p",{className:"task-description",children:i.description}),e.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-muted",children:[e.jsxs("span",{children:["Started: ",i.startTime]}),e.jsxs("span",{children:["Duration: ",i.estimatedDuration]})]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-2",children:[e.jsxs("span",{className:"text-sm font-medium",children:[i.progress,"%"]}),e.jsx("div",{className:"task-progress",children:e.jsx("div",{className:"task-progress-bar",style:{width:`${i.progress}%`}})})]})]},i.id)),h.length===0&&e.jsxs("div",{className:"text-center py-8 text-muted",children:[e.jsx(ee,{size:48,className:"mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No tasks found for the selected filter."})]})]}),e.jsxs("div",{className:"mt-6 p-4 bg-secondary rounded-lg",children:[e.jsx("h3",{className:"font-medium mb-3",children:"Task Statistics"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"metric",children:[e.jsx("div",{className:"metric-value text-blue-500",children:f.running}),e.jsx("div",{className:"metric-label",children:"Running"})]}),e.jsxs("div",{className:"metric",children:[e.jsx("div",{className:"metric-value text-green-500",children:f.completed}),e.jsx("div",{className:"metric-label",children:"Completed"})]}),e.jsxs("div",{className:"metric",children:[e.jsx("div",{className:"metric-value text-yellow-500",children:f.pending}),e.jsx("div",{className:"metric-label",children:"Pending"})]}),e.jsxs("div",{className:"metric",children:[e.jsx("div",{className:"metric-value text-red-500",children:f.error}),e.jsx("div",{className:"metric-label",children:"Errors"})]})]})]})]})},ts=({lastAudio:l})=>{const[m,d]=r.useState(!1),[g,c]=r.useState(!1),[p,h]=r.useState(!1),[f,i]=r.useState(.7),[_,C]=r.useState(0),[u,M]=r.useState(0),A=r.useRef(null),T=r.useRef(null),[P,D]=r.useState("initialization"),[S,R]=r.useState([]),[I,L]=r.useState([]),[O,a]=r.useState({initialization:{enabled:!0,volume:.8,frequency:"high"},planning:{enabled:!0,volume:.6,frequency:"normal"},implementation:{enabled:!0,volume:.5,frequency:"normal"},testing:{enabled:!0,volume:.7,frequency:"high"},deployment:{enabled:!0,volume:.9,frequency:"high"}}),[k,o]=r.useState(!1),[x,N]=r.useState(["startup.wav","ready_for_input.wav","agent_activated.wav","pipeline_complete.wav","pipeline_initiated.wav","confirm_required.wav","file_operation_complete.wav","command_successful.wav","phase_complete.wav","milestone_complete.wav","build_successful.wav","tests_passed.wav","git_commit.wav","frontend_agent.wav","backend_agent.wav","database_agent.wav","master_orchestrator.wav","v3_feature_activated.wav"]),[y,b]=r.useState(Array.from({length:40},()=>Math.random()*100));r.useEffect(()=>{if(m||p){const t=setInterval(()=>{b(j=>j.map(()=>Math.random()*100))},100);return()=>clearInterval(t)}},[m,p]),r.useEffect(()=>{const t=setInterval(()=>{var j;if(Math.random()>.8){const w={id:`event_${Date.now()}`,type:["system","agent","phase","success","error"][Math.floor(Math.random()*5)],phase:P,agent:S[Math.floor(Math.random()*S.length)],operation:["file_edit","git_commit","test_run","build"][Math.floor(Math.random()*4)],timestamp:Date.now(),audioFile:x[Math.floor(Math.random()*x.length)]};L(F=>[w,...F.slice(0,49)]),(j=O[P])!=null&&j.enabled&&n(w)}},5e3);return()=>clearInterval(t)},[P,S,x,O]),r.useEffect(()=>{const t=A.current;if(!t)return;const j=()=>C(t.currentTime),w=()=>M(t.duration||0),F=()=>d(!1);return t.addEventListener("timeupdate",j),t.addEventListener("loadedmetadata",w),t.addEventListener("ended",F),()=>{t.removeEventListener("timeupdate",j),t.removeEventListener("loadedmetadata",w),t.removeEventListener("ended",F)}},[]);const $=()=>{const t=A.current;t&&(m?t.pause():t.play().catch(console.error),d(!m))},W=()=>{const t=A.current;t&&(t.muted=!g,c(!g))},s=t=>{const j=parseFloat(t.target.value);i(j);const w=A.current;w&&(w.volume=j)},E=t=>{const j=parseFloat(t.target.value);C(j);const w=A.current;w&&(w.currentTime=j)},q=async()=>{try{const t=await navigator.mediaDevices.getUserMedia({audio:!0}),j=new MediaRecorder(t);T.current=j;const w=[];j.ondataavailable=F=>{w.push(F.data)},j.onstop=()=>{const F=new Blob(w,{type:"audio/wav"}),js=URL.createObjectURL(F),xe=`recording-${Date.now()}.wav`;N(_e=>[..._e,xe]),console.log("Recording saved:",xe)},j.start(),h(!0)}catch(t){console.error("Error starting recording:",t)}},Z=()=>{T.current&&p&&(T.current.stop(),T.current.stream.getTracks().forEach(t=>t.stop()),h(!1))},V=t=>{const j=Math.floor(t/60),w=Math.floor(t%60);return`${j}:${w.toString().padStart(2,"0")}`},n=t=>{var j;if(t.audioFile&&!g){const w=new Audio(`/audio/${t.audioFile}`),F=((j=O[t.phase])==null?void 0:j.volume)||f;w.volume=F,w.play().catch(console.error)}},v=t=>{D(t);const j={id:`phase_${Date.now()}`,type:"phase",phase:t,operation:"phase_transition",timestamp:Date.now(),audioFile:"phase_complete.wav"};L(w=>[j,...w.slice(0,49)]),n(j)},z=t=>{if(!S.includes(t)){R(w=>[...w,t]);const j={id:`agent_${Date.now()}`,type:"agent",phase:P,agent:t,operation:"agent_activate",timestamp:Date.now(),audioFile:"agent_activated.wav"};L(w=>[j,...w.slice(0,49)]),n(j)}},U=t=>{R(j=>j.filter(w=>w!==t))},B=t=>{const j=new Audio(`/audio/${t}`);j.volume=f,j.play().catch(console.error)},G=t=>({system:"bg-blue-500",agent:"bg-green-500",phase:"bg-purple-500",success:"bg-green-600",error:"bg-red-500"})[t]||"bg-gray-500";return e.jsxs("div",{className:"audio-controller",children:[e.jsxs("div",{className:"card-header",children:[e.jsxs("h2",{className:"card-title",children:[e.jsx(re,{size:20}),"Phase-Aware Audio Controller"]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted",children:[e.jsxs("span",{children:["Phase: ",e.jsx("strong",{className:"text-accent-primary",children:P})]}),e.jsxs("span",{children:["Agents: ",e.jsx("strong",{className:"text-accent-primary",children:S.length})]}),e.jsxs("span",{children:["Events: ",e.jsx("strong",{className:"text-accent-primary",children:I.length})]})]})]}),e.jsxs("div",{className:"mb-4 p-3 bg-secondary rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"font-medium",children:"Development Phase"}),e.jsx("button",{onClick:()=>o(!k),className:"btn btn-secondary text-xs",children:e.jsx(ce,{size:14})})]}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:Object.keys(O).map(t=>e.jsx("button",{onClick:()=>v(t),className:`btn text-xs py-2 ${P===t?"btn-primary":"btn-secondary"}`,children:t.charAt(0).toUpperCase()+t.slice(1)},t))})]}),e.jsxs("div",{className:"mb-4 p-3 bg-secondary rounded-lg",children:[e.jsx("h3",{className:"font-medium mb-2",children:"Active Agents"}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:S.map(t=>e.jsxs("span",{className:"px-2 py-1 bg-accent-primary text-white rounded text-xs flex items-center gap-1",children:[e.jsx(J,{size:12}),t,e.jsx("button",{onClick:()=>U(t),className:"ml-1 hover:bg-white hover:bg-opacity-20 rounded",children:"×"})]},t))}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:["frontend","backend","database","mobile","testing","orchestrator"].map(t=>e.jsxs("button",{onClick:()=>z(t),disabled:S.includes(t),className:"btn btn-outline text-xs py-1 disabled:opacity-50",children:["Add ",t]},t))})]}),e.jsxs("div",{className:"audio-controls",children:[e.jsx("button",{className:"audio-button",onClick:()=>console.log("Previous track"),children:e.jsx(Be,{size:16})}),e.jsx("button",{className:"audio-button",onClick:$,children:m?e.jsx(ke,{size:20}):e.jsx(ie,{size:20})}),e.jsx("button",{className:"audio-button",onClick:()=>console.log("Next track"),children:e.jsx(We,{size:16})}),e.jsx("button",{className:"audio-button",onClick:W,children:g?e.jsx(qe,{size:16}):e.jsx(re,{size:16})}),e.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:f,onChange:s,className:"w-24"}),e.jsx("button",{className:`audio-button ${p?"bg-red-500":""}`,onClick:p?Z:q,children:p?e.jsx(Ge,{size:16}):e.jsx(Ve,{size:16})})]}),e.jsxs("div",{className:"audio-waveform",children:[e.jsx("div",{className:"flex items-end justify-center h-full gap-1 px-4",children:y.map((t,j)=>e.jsx("div",{className:"bg-white bg-opacity-30 rounded-sm transition-all duration-75",style:{height:`${Math.max(2,t)}%`,width:"3px"}},j))}),(m||p)&&e.jsx("div",{className:"waveform-animation"})]}),e.jsx("div",{className:"mt-4",children:e.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[e.jsx("span",{className:"font-mono",children:V(_)}),e.jsx("input",{type:"range",min:"0",max:u||0,value:_,onChange:E,className:"flex-1",disabled:!u}),e.jsx("span",{className:"font-mono",children:V(u)})]})}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"font-medium mb-3",children:"Recent Audio Events"}),e.jsxs("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:[I.slice(0,10).map(t=>e.jsxs("div",{className:"flex items-center justify-between p-2 rounded bg-secondary hover:bg-tertiary transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${G(t.type)}`}),e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"font-medium",children:t.operation}),e.jsxs("div",{className:"text-xs text-muted",children:[t.agent&&`${t.agent} • `,new Date(t.timestamp).toLocaleTimeString()]})]})]}),e.jsx("button",{onClick:()=>t.audioFile&&B(t.audioFile),className:"btn btn-secondary text-xs",disabled:!t.audioFile,children:"Play"})]},t.id)),I.length===0&&e.jsx("div",{className:"text-center text-muted text-sm py-4",children:"No audio events yet"})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsxs("h3",{className:"font-medium mb-3",children:["Audio Library (",x.length," files)"]}),e.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:x.map((t,j)=>e.jsxs("div",{className:`flex items-center justify-between p-2 rounded bg-secondary hover:bg-tertiary transition-colors ${t===l?"border-l-2 border-accent-primary":""}`,children:[e.jsx("span",{className:"text-sm font-mono",children:t}),e.jsx("button",{className:"btn btn-secondary text-xs",onClick:()=>B(t),children:"Test"})]},j))})]}),e.jsxs("audio",{ref:A,onPlay:()=>d(!0),onPause:()=>d(!1),preload:"metadata",children:[e.jsx("source",{src:"/audio/sample.mp3",type:"audio/mpeg"}),"Your browser does not support the audio element."]}),k&&e.jsxs("div",{className:"mt-6 p-4 bg-secondary rounded-lg",children:[e.jsx("h3",{className:"font-medium mb-3",children:"Phase-Aware Audio Settings"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"text-sm font-medium mb-2",children:"Global Settings"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1",children:"Output Device"}),e.jsxs("select",{className:"w-full text-sm",children:[e.jsx("option",{children:"Default Audio"}),e.jsx("option",{children:"Speakers"}),e.jsx("option",{children:"Headphones"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1",children:"Audio Quality"}),e.jsxs("select",{className:"w-full text-sm",children:[e.jsx("option",{children:"High Quality"}),e.jsx("option",{children:"Standard"}),e.jsx("option",{children:"Low Bandwidth"})]})]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"text-sm font-medium mb-2",children:"Phase-Specific Settings"}),e.jsx("div",{className:"space-y-3",children:Object.entries(O).map(([t,j])=>e.jsxs("div",{className:"p-3 bg-tertiary rounded",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium capitalize",children:t}),e.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[e.jsx("input",{type:"checkbox",checked:j.enabled,onChange:w=>a(F=>({...F,[t]:{...F[t],enabled:w.target.checked}}))}),"Enabled"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs mb-1",children:"Volume"}),e.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:j.volume,onChange:w=>a(F=>({...F,[t]:{...F[t],volume:parseFloat(w.target.value)}})),className:"w-full"}),e.jsxs("span",{className:"text-xs text-muted",children:[Math.round(j.volume*100),"%"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs mb-1",children:"Frequency"}),e.jsxs("select",{value:j.frequency,onChange:w=>a(F=>({...F,[t]:{...F[t],frequency:w.target.value}})),className:"w-full text-xs",children:[e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"normal",children:"Normal"}),e.jsx("option",{value:"high",children:"High"})]})]})]})]},t))})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Auto-play notifications"}),e.jsx("input",{type:"checkbox",defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Agent transition sounds"}),e.jsx("input",{type:"checkbox",defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Error emphasis"}),e.jsx("input",{type:"checkbox",defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Success celebrations"}),e.jsx("input",{type:"checkbox",defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Cross-platform compatibility"}),e.jsx("input",{type:"checkbox",defaultChecked:!0})]})]}),e.jsxs("div",{className:"mt-4 p-3 bg-tertiary rounded",children:[e.jsx("h4",{className:"text-sm font-medium mb-2",children:"System Information"}),e.jsxs("div",{className:"text-xs text-muted space-y-1",children:[e.jsxs("div",{children:["Platform: ",navigator.platform]}),e.jsxs("div",{children:["Audio Context: ",typeof AudioContext<"u"?"Supported":"Not Supported"]}),e.jsxs("div",{children:["Web Audio API: ",typeof window.AudioContext<"u"?"Available":"Unavailable"]}),e.jsxs("div",{children:["Media Devices: ",navigator.mediaDevices?"Supported":"Not Supported"]})]})]})]})]})};var as={};const K=as.NEXT_PUBLIC_MCP_API_URL||"http://localhost:8000",rs=()=>{const[l,m]=r.useState([]),[d,g]=r.useState(null),[c,p]=r.useState(null),[h,f]=r.useState(!0),[i,_]=r.useState(null),[C,u]=r.useState(!1),[M,A]=r.useState(null),[T,P]=r.useState(null),D=r.useCallback(async()=>{try{const s=await fetch(`${K}/mcp/services`);if(!s.ok)throw new Error("Failed to fetch services");const E=await s.json();m(E.services||[]),u(!0),_(null),A(new Date)}catch(s){_(s instanceof Error?s.message:"Failed to fetch services"),u(!1)}},[]),S=r.useCallback(async()=>{try{const s=await fetch(`${K}/mcp/status`);if(!s.ok)throw new Error("Failed to fetch status");const E=await s.json();g(E)}catch(s){console.error("Failed to fetch status:",s)}},[]),R=r.useCallback(async()=>{try{const s=await fetch(`${K}/mcp/config`);if(!s.ok)throw new Error("Failed to fetch config");const E=await s.json();p(E)}catch(s){console.error("Failed to fetch config:",s)}},[]),I=async(s,E)=>{try{if(m(Z=>Z.map(V=>V.id===s?{...V,status:E==="stop"?"stopped":"starting"}:V)),!(await fetch(`${K}/mcp/services/${s}/actions`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:E})})).ok)throw new Error(`Failed to ${E} service`);setTimeout(D,1e3)}catch(q){_(q instanceof Error?q.message:`Failed to ${E} service`),D()}},L=async()=>{try{if(f(!0),!(await fetch(`${K}/mcp/discover`,{method:"POST"})).ok)throw new Error("Failed to discover services");setTimeout(()=>{D(),S()},1e3)}catch(s){_(s instanceof Error?s.message:"Failed to discover services")}finally{f(!1)}},O=r.useCallback(()=>{if(!T)try{const s=new WebSocket(`${K.replace("http","ws")}/mcp/ws`);s.onopen=()=>{console.log("MCP WebSocket connected"),u(!0)},s.onmessage=E=>{try{const q=JSON.parse(E.data);switch(q.type){case"initial_status":g(q.status);break;case"service_registered":case"service_unregistered":case"service_action":D(),S();break;case"config_updated":p(q.config);break;case"services_discovered":D(),S();break}A(new Date)}catch(q){console.error("Failed to parse WebSocket message:",q)}},s.onclose=()=>{console.log("MCP WebSocket disconnected"),u(!1),P(null),setTimeout(O,5e3)},s.onerror=E=>{console.error("MCP WebSocket error:",E),u(!1)},P(s)}catch(s){console.error("Failed to connect WebSocket:",s),u(!1)}},[T,D,S]);r.useEffect(()=>((async()=>{f(!0),await Promise.all([D(),S(),R()]),f(!1)})(),O(),()=>{T&&T.close()}),[D,S,R,O]),r.useEffect(()=>{const s=setInterval(()=>{C||(D(),S())},3e4);return()=>clearInterval(s)},[C,D,S]);const a=s=>s<60?`${Math.floor(s)}s`:s<3600?`${Math.floor(s/60)}m`:s<86400?`${Math.floor(s/3600)}h ${Math.floor(s%3600/60)}m`:`${Math.floor(s/86400)}d ${Math.floor(s%86400/3600)}h`,k=s=>{switch(s){case"playwright":return"bg-purple-100 text-purple-700";case"github":return"bg-blue-100 text-blue-700";case"websearch":return"bg-green-100 text-green-700";case"proxy":return"bg-orange-100 text-orange-700";case"gateway":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},o=s=>{switch(s){case"running":return e.jsx(Y,{size:16,className:"text-green-500"});case"stopped":return e.jsx(le,{size:16,className:"text-gray-500"});case"error":return e.jsx(Q,{size:16,className:"text-red-500"});case"starting":return e.jsx(ae,{size:16,className:"text-yellow-500"});case"unknown":return e.jsx(ae,{size:16,className:"text-gray-400"});default:return e.jsx(le,{size:16,className:"text-gray-500"})}},x=s=>{switch(s){case"running":return"text-green-500";case"stopped":return"text-gray-500";case"error":return"text-red-500";case"starting":return"text-yellow-500";case"unknown":return"text-gray-400";default:return"text-gray-500"}},N=l.filter(s=>s.status==="running").length,y=l.filter(s=>s.status==="error").length,b=l.reduce((s,E)=>s+E.metrics.requests_total,0),$=l.reduce((s,E)=>s+E.metrics.error_count,0),W=l.filter(s=>s.is_healthy).length;return h&&l.length===0?e.jsx("div",{className:"mcp-manager",children:e.jsx("div",{className:"card",style:{gridColumn:"1 / -1"},children:e.jsx("div",{className:"card-content",children:e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx(te,{size:24,className:"animate-spin text-blue-500 mr-3"}),e.jsx("span",{children:"Loading MCP Manager..."})]})})})}):e.jsxs("div",{className:"mcp-manager",children:[e.jsxs("div",{className:"card",style:{gridColumn:"1 / -1"},children:[e.jsxs("div",{className:"card-header",children:[e.jsxs("h2",{className:"card-title",children:[e.jsx(H,{size:20}),"MCP Manager",e.jsxs("span",{className:`ml-2 text-xs px-2 py-1 rounded ${C?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[C?e.jsx(be,{size:12,className:"inline mr-1"}):e.jsx(ye,{size:12,className:"inline mr-1"}),C?"Connected":"Disconnected"]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsxs("span",{className:"text-success",children:["Running: ",N]}),e.jsxs("span",{className:"text-error",children:["Errors: ",y]}),e.jsxs("span",{className:"text-blue-500",children:["Healthy: ",W]}),M&&e.jsxs("span",{className:"text-gray-500",children:["Updated: ",M.toLocaleTimeString()]})]})]}),e.jsxs("div",{className:"card-content",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{children:"Manage Model Context Protocol services and microservices"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{className:"btn btn-secondary text-xs",onClick:L,disabled:h,children:[e.jsx(te,{size:12,className:h?"animate-spin":""}),"Discover Services"]}),e.jsxs("button",{className:"btn btn-secondary text-xs",onClick:D,children:[e.jsx(te,{size:12}),"Refresh"]})]})]}),i&&e.jsx("div",{className:"mt-3 p-3 bg-red-50 border border-red-200 rounded text-red-700 text-sm",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Q,{size:16,className:"mr-2"}),i]})})]})]}),l.length===0?e.jsx("div",{className:"card",style:{gridColumn:"1 / -1"},children:e.jsx("div",{className:"card-content",children:e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(H,{size:48,className:"mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-lg font-medium mb-2",children:"No MCP Services Found"}),e.jsx("p",{className:"text-sm mb-4",children:C?"Click 'Discover Services' to scan for available MCP services":"Unable to connect to MCP Manager API"}),C&&e.jsxs("button",{className:"btn btn-primary",onClick:L,disabled:h,children:[e.jsx(te,{size:16,className:h?"animate-spin":""}),"Discover Services"]})]})})}):l.map(s=>e.jsxs("div",{className:`mcp-service ${s.is_healthy?"active":""}`,children:[e.jsxs("div",{className:"mcp-header",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o(s.status),e.jsx("h3",{className:"font-medium",children:s.name}),e.jsxs("span",{className:"text-xs bg-tertiary px-2 py-1 rounded",children:["v",s.version]}),e.jsx("span",{className:`text-xs px-2 py-1 rounded ${k(s.type)}`,children:s.type})]}),e.jsx("p",{className:"text-sm text-secondary",children:s.description}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("span",{className:"text-xs text-gray-500",children:s.url}),s.tags.length>0&&e.jsx("div",{className:"flex gap-1",children:s.tags.slice(0,3).map(E=>e.jsx("span",{className:"text-xs bg-gray-100 text-gray-600 px-1 py-0.5 rounded",children:E},E))})]})]}),e.jsx("div",{className:"mcp-actions",children:s.status==="running"?e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn btn-secondary text-xs",onClick:()=>I(s.id,"restart"),title:"Restart service",children:e.jsx(Se,{size:12})}),e.jsx("button",{className:"btn btn-secondary text-xs",onClick:()=>I(s.id,"stop"),title:"Stop service",children:e.jsx(le,{size:12})})]}):e.jsxs("button",{className:"btn btn-primary text-xs",onClick:()=>I(s.id,"start"),disabled:s.status==="starting",title:"Start service",children:[e.jsx(ie,{size:12}),s.status==="starting"?"Starting...":"Start"]})})]}),e.jsxs("div",{className:"mcp-stats",children:[e.jsxs("div",{className:"metric",children:[e.jsx("div",{className:"metric-value",children:s.port}),e.jsx("div",{className:"metric-label",children:"Port"})]}),e.jsxs("div",{className:"metric",children:[e.jsx("div",{className:"metric-value",children:a(s.metrics.uptime)}),e.jsx("div",{className:"metric-label",children:"Uptime"})]}),e.jsxs("div",{className:"metric",children:[e.jsx("div",{className:"metric-value text-blue-500",children:s.metrics.requests_total.toLocaleString()}),e.jsx("div",{className:"metric-label",children:"Requests"})]}),e.jsxs("div",{className:"metric",children:[e.jsx("div",{className:`metric-value ${s.metrics.error_count>0?"text-red-500":"text-green-500"}`,children:s.metrics.error_count}),e.jsx("div",{className:"metric-label",children:"Errors"})]})]}),e.jsxs("div",{className:"mcp-stats mt-2 pt-2 border-t",children:[e.jsxs("div",{className:"metric",children:[e.jsxs("div",{className:"metric-value text-purple-500",children:[s.metrics.response_time_avg.toFixed(0),"ms"]}),e.jsx("div",{className:"metric-label",children:"Avg Response"})]}),e.jsxs("div",{className:"metric",children:[e.jsxs("div",{className:"metric-value text-orange-500",children:[s.metrics.cpu_usage.toFixed(1),"%"]}),e.jsx("div",{className:"metric-label",children:"CPU Usage"})]}),e.jsxs("div",{className:"metric",children:[e.jsxs("div",{className:"metric-value text-cyan-500",children:[s.metrics.memory_usage.toFixed(1),"%"]}),e.jsx("div",{className:"metric-label",children:"Memory"})]}),e.jsxs("div",{className:"metric",children:[e.jsx("div",{className:`metric-value ${s.is_healthy?"text-green-500":"text-red-500"}`,children:s.is_healthy?"Yes":"No"}),e.jsx("div",{className:"metric-label",children:"Healthy"})]})]}),e.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[e.jsx("span",{className:`text-sm font-medium ${x(s.status)}`,children:s.status.charAt(0).toUpperCase()+s.status.slice(1)}),s.status==="running"&&s.is_healthy&&e.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),"Live"]}),s.last_seen&&e.jsxs("span",{className:"text-xs text-gray-400",children:["Last seen: ",new Date(s.last_seen).toLocaleTimeString()]})]})]},s.id)),e.jsxs("div",{className:"card",style:{gridColumn:"1 / -1"},children:[e.jsx("div",{className:"card-header",children:e.jsxs("h3",{className:"card-title",children:[e.jsx(ce,{size:18}),"System Overview"]})}),e.jsxs("div",{className:"card-content",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"metric",children:[e.jsx("div",{className:"metric-value text-green-500",children:N}),e.jsx("div",{className:"metric-label",children:"Running Services"})]}),e.jsxs("div",{className:"metric",children:[e.jsx("div",{className:"metric-value text-red-500",children:y}),e.jsx("div",{className:"metric-label",children:"Failed Services"})]}),e.jsxs("div",{className:"metric",children:[e.jsx("div",{className:"metric-value text-blue-500",children:b.toLocaleString()}),e.jsx("div",{className:"metric-label",children:"Total Requests"})]}),e.jsxs("div",{className:"metric",children:[e.jsx("div",{className:"metric-value text-yellow-500",children:$}),e.jsx("div",{className:"metric-label",children:"Total Errors"})]})]}),e.jsxs("div",{className:"mt-6 flex gap-2 flex-wrap",children:[e.jsx("button",{className:"btn btn-primary",children:"Start All Services"}),e.jsx("button",{className:"btn btn-secondary",children:"Restart All"}),e.jsx("button",{className:"btn btn-secondary",children:"View Logs"}),e.jsx("button",{className:"btn btn-secondary",children:"Export Config"})]})]})]}),e.jsxs("div",{className:"card",style:{gridColumn:"1 / -1"},children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title",children:"Configuration"})}),e.jsx("div",{className:"card-content",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Default Port Range"}),e.jsx("input",{type:"text",defaultValue:"8080-8090",className:"w-full",placeholder:"8080-8090"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Health Check Interval"}),e.jsxs("select",{className:"w-full",children:[e.jsx("option",{value:"30",children:"30 seconds"}),e.jsx("option",{value:"60",selected:!0,children:"1 minute"}),e.jsx("option",{value:"300",children:"5 minutes"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Auto-restart on failure"}),e.jsx("input",{type:"checkbox",defaultChecked:!0,className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Log Level"}),e.jsxs("select",{className:"w-full",children:[e.jsx("option",{value:"error",children:"Error"}),e.jsx("option",{value:"warn",children:"Warning"}),e.jsx("option",{value:"info",selected:!0,children:"Info"}),e.jsx("option",{value:"debug",children:"Debug"})]})]})]})})]})]})},Ce=(l,m={})=>{const{reconnectInterval:d=1e3,heartbeatInterval:g=3e4,maxReconnectAttempts:c=10}=m,[p,h]=r.useState(null),[f,i]=r.useState(!1),[_,C]=r.useState("disconnected"),u=r.useRef(null),M=r.useRef(null),A=r.useRef(null),T=r.useRef(0),P=r.useRef(!0),D=r.useCallback(()=>{M.current&&(clearTimeout(M.current),M.current=null),A.current&&(clearTimeout(A.current),A.current=null)},[]),S=r.useCallback(()=>{g>0&&(A.current=setTimeout(()=>{var a;((a=u.current)==null?void 0:a.readyState)===WebSocket.OPEN&&(u.current.send(JSON.stringify({type:"ping"})),S())},g))},[g]),R=r.useCallback(()=>{if(P.current)try{C("connecting"),u.current=new WebSocket(l),u.current.onopen=()=>{P.current&&(console.log("🔌 WebSocket connected to",l),i(!0),C("connected"),T.current=0,S())},u.current.onmessage=a=>{if(P.current)try{const k=JSON.parse(a.data);if(k.type==="pong")return;h(k)}catch{console.warn("Failed to parse WebSocket message:",a.data)}},u.current.onclose=a=>{if(P.current&&(console.log("🔌 WebSocket disconnected from",l,a.code,a.reason),i(!1),C("disconnected"),D(),a.code!==1e3&&T.current<c)){T.current++;const k=Math.min(d*Math.pow(2,T.current-1),3e4);console.log(`🔄 Attempting to reconnect in ${k}ms (attempt ${T.current}/${c})`),M.current=setTimeout(()=>{P.current&&R()},k)}},u.current.onerror=a=>{P.current&&(console.error("🔌 WebSocket error:",a),C("error"))}}catch(a){console.error("Failed to create WebSocket connection:",a),C("error")}},[l,d,c,S,D]),I=r.useCallback(()=>{D(),u.current&&(u.current.close(1e3,"Manual disconnect"),u.current=null),i(!1),C("disconnected")},[D]),L=r.useCallback(a=>{var k;if(((k=u.current)==null?void 0:k.readyState)===WebSocket.OPEN)try{const o=typeof a=="string"?a:JSON.stringify(a);u.current.send(o)}catch(o){console.error("Failed to send WebSocket message:",o)}else console.warn("WebSocket not connected, cannot send message")},[]),O=r.useCallback(()=>{I(),T.current=0,setTimeout(R,100)},[I,R]);return r.useEffect(()=>(R(),()=>{P.current=!1,I()}),[R,I]),r.useEffect(()=>()=>{P.current=!1},[]),{data:p,isConnected:f,connectionState:_,send:L,reconnect:O}},ns=({apiUrl:l="http://localhost:8081"})=>{const[m,d]=r.useState([]),[g,c]=r.useState(null),[p,h]=r.useState([]),[f,i]=r.useState(!1),[_,C]=r.useState(null),[u,M]=r.useState(!1),[A,T]=r.useState(null),[P,D]=r.useState([]),[S,R]=r.useState(null),[I,L]=r.useState(""),[O,a]=r.useState([]),{data:k,isConnected:o,send:x}=Ce("ws://localhost:8081/ws",{reconnectInterval:2e3,heartbeatInterval:3e4,maxReconnectAttempts:5});r.useEffect(()=>{N(),y()},[]),r.useEffect(()=>{if(k)switch(console.log("📡 WebSocket data received:",k),k.type){case"projects_update":d(k.projects||[]),R(k);break;case"project_sessions":h(k.sessions||[]);break;case"session_content":k.dev_stack_commands&&D(k.dev_stack_commands);break;case"command_executed":a(n=>[k,...n.slice(0,49)]);break;case"data_update":d(k.projects||[]),R(k);break;case"system_status":R(k);break}},[k]),r.useEffect(()=>{M(o)},[o]);const N=async()=>{i(!0),C(null);try{const n=await fetch(`${l}/api/browser/projects`);if(!n.ok)throw new Error(`HTTP ${n.status}: ${n.statusText}`);const v=await n.json();d(v.projects||[]),M(!0)}catch(n){C(n instanceof Error?n.message:"Failed to load projects"),M(!1)}finally{i(!1)}},y=async()=>{try{const n=await fetch(`${l}/api/attribution`);if(n.ok){const v=await n.json();T(v)}}catch(n){console.warn("Failed to load attribution info:",n)}},b=async n=>{i(!0),C(null);try{x&&x({type:"get_project_sessions",project_name:n});const v=await fetch(`${l}/api/browser/project/${n}`);if(!v.ok)throw new Error(`HTTP ${v.status}: ${v.statusText}`);const z=await v.json();h(z.sessions||[]),c(n)}catch(v){C(v instanceof Error?v.message:"Failed to load sessions")}finally{i(!1)}},$=async(n,v)=>{if(n.trim())try{x&&x({type:"execute_dev_stack_command",command:{command:n,agent_target:W(n),parameters:s(n),execution_context:{session_uuid:v,source:"browser_monitor_ui"}},session_uuid:v});const z=await fetch(`${l}/api/commands/execute`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({command:n,agent_target:W(n),parameters:s(n),session_uuid:v,execution_context:{source:"browser_monitor_ui",timestamp:new Date().toISOString()}})});if(z.ok){const U=await z.json();a(B=>[U,...B.slice(0,49)])}}catch(z){console.error("Failed to execute command:",z),C(`Command execution failed: ${z instanceof Error?z.message:"Unknown error"}`)}},W=n=>{const v=n.match(/@agent-([a-z-]+)/i);return v?v[1]:null},s=n=>{const v={raw_command:n},z=n.match(/!orchestrate\s+(.+)/i);z&&(v.orchestration_request=z[1]);const U=n.match(/\?status\s+(.+)/i);U&&(v.status_query=U[1]);const B=n.match(/@context\s+(\w+)\s*(.*)?/i);return B&&(v.context_operation=B[1],v.context_parameters=B[2]||""),v},E=n=>{const v=["B","KB","MB","GB"];let z=n,U=0;for(;z>=1024&&U<v.length-1;)z/=1024,U++;return`${z.toFixed(1)} ${v[U]}`},q=n=>{const v=new Date(n),U=new Date().getTime()-v.getTime(),B=Math.floor(U/6e4),G=Math.floor(B/60),t=Math.floor(G/24);return B<60?`${B}m ago`:G<24?`${G}h ago`:`${t}d ago`},Z=()=>{window.open("http://localhost:8080","_blank")},V=(n,v)=>{window.open(`http://localhost:8080/session/${n}/${v}`,"_blank")};return e.jsxs("div",{className:"browser-monitor p-6 bg-white rounded-lg shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(we,{className:"w-6 h-6 text-blue-600"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Claude Code Browser Monitor"}),e.jsx("div",{className:`w-3 h-3 rounded-full ${u?"bg-green-500":"bg-red-500"}`}),o&&e.jsxs("div",{className:"flex items-center space-x-2 bg-green-50 px-3 py-1 rounded-full",children:[e.jsx(ee,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"text-sm text-green-700",children:"Live"})]}),S&&e.jsxs("div",{className:"text-sm text-gray-600",children:["Last update: ",new Date(S.timestamp).toLocaleTimeString()]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{onClick:()=>$("?status system"),className:"flex items-center space-x-2 px-3 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[e.jsx(He,{className:"w-4 h-4"}),e.jsx("span",{children:"System Status"})]}),e.jsxs("button",{onClick:Z,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(he,{className:"w-4 h-4"}),e.jsx("span",{children:"Open Full Browser"})]})]})]}),A&&e.jsx("div",{className:"mb-6 p-4 bg-blue-50 border-l-4 border-blue-500 rounded-r-lg",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(Je,{className:"w-5 h-5 text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Claude Code Browser"})," by"," ",e.jsx("a",{href:"https://github.com/zainhoda",target:"_blank",rel:"noopener noreferrer",className:"underline hover:text-blue-900",children:"@zainhoda"})]}),e.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"Licensed under AGPL-3.0 • Integrated via adapter pattern"})]})]})}),_&&e.jsxs("div",{className:"mb-6 p-4 bg-red-50 border-l-4 border-red-500 rounded-r-lg",children:[e.jsxs("p",{className:"text-red-800",children:[e.jsx("strong",{children:"Connection Error:"})," ",_]}),e.jsx("button",{onClick:N,className:"mt-2 text-red-600 hover:text-red-800 underline text-sm",children:"Retry Connection"})]}),f&&e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("span",{className:"ml-3 text-gray-600",children:"Loading..."})]}),!f&&!g&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center space-x-2",children:[e.jsx(pe,{className:"w-5 h-5"}),e.jsxs("span",{children:["Claude Code Projects (",m.length,")"]})]}),m.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(pe,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"No Claude Code projects found"}),e.jsx("p",{className:"text-sm",children:"Projects are stored in ~/.claude/projects/"})]}):e.jsx("div",{className:"grid gap-4",children:m.map(n=>{var v;return e.jsx("div",{onClick:()=>b(n.name),className:"p-4 border border-gray-200 rounded-lg hover:border-blue-300 hover:bg-blue-50 cursor-pointer transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Qe,{className:"w-5 h-5 text-gray-500"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:n.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[((v=n.sessions)==null?void 0:v.length)||0," sessions"]})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-500",children:[e.jsx(se,{className:"w-4 h-4"}),e.jsx("span",{children:q(n.modTime)})]})})]})},n.name)})})]}),e.jsxs("div",{className:"mb-6 p-4 bg-gray-50 border border-gray-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx(ge,{className:"w-5 h-5 text-gray-700"}),e.jsx("h3",{className:"font-semibold text-gray-900",children:"Dev Stack Command Interface"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{type:"text",value:I,onChange:n=>L(n.target.value),onKeyPress:n=>{n.key==="Enter"&&($(I),L(""))},placeholder:"Enter Dev Stack command (e.g., @agent-api-integration, !orchestrate, ?status)",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("button",{onClick:()=>{$(I),L("")},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Execute"})]}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:[{label:"API Integration",cmd:"@agent-api-integration analyze current project"},{label:"System Status",cmd:"?status all"},{label:"Orchestrate",cmd:"!orchestrate frontend and backend agents"},{label:"Context Snapshot",cmd:"@context snapshot current"}].map(n=>e.jsx("button",{onClick:()=>$(n.cmd),className:"px-3 py-1 text-sm bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:n.label},n.label))})]}),P.length>0&&e.jsxs("div",{className:"mb-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx(ne,{className:"w-5 h-5 text-yellow-700"}),e.jsx("h3",{className:"font-semibold text-yellow-900",children:"Dev Stack Commands Found"})]}),e.jsx("div",{className:"space-y-2",children:P.slice(0,5).map((n,v)=>e.jsxs("div",{className:"flex items-center justify-between bg-white p-2 rounded border",children:[e.jsx("span",{className:"font-mono text-sm text-gray-700",children:n.command}),e.jsx("button",{onClick:()=>$(n.command,n.session_uuid),className:"px-2 py-1 text-xs bg-yellow-600 text-white rounded hover:bg-yellow-700",children:"Execute"})]},v))})]}),O.length>0&&e.jsxs("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx(J,{className:"w-5 h-5 text-green-700"}),e.jsx("h3",{className:"font-semibold text-green-900",children:"Recent Command Executions"})]}),e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:O.slice(0,10).map((n,v)=>{var z,U,B,G;return e.jsxs("div",{className:"bg-white p-3 rounded border",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-mono text-sm text-gray-700",children:((z=n.command)==null?void 0:z.command)||((U=n.result)==null?void 0:U.command)||"Unknown command"}),e.jsx("span",{className:`text-xs px-2 py-1 rounded ${(B=n.result)!=null&&B.success||n.success?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:(G=n.result)!=null&&G.success||n.success?"Success":"Failed"})]}),n.timestamp&&e.jsx("div",{className:"text-xs text-gray-500",children:new Date(n.timestamp).toLocaleTimeString()})]},v)})})]}),!f&&g&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center space-x-2",children:[e.jsx(J,{className:"w-5 h-5"}),e.jsxs("span",{children:["Sessions in ",g]})]}),e.jsx("button",{onClick:()=>{c(null),h([])},className:"text-blue-600 hover:text-blue-800 text-sm",children:"← Back to Projects"})]}),p.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(J,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"No sessions found in this project"})]}):e.jsx("div",{className:"space-y-3",children:p.map(n=>{var v,z,U,B,G;return e.jsxs("div",{onClick:()=>V(g,n.uuid),className:"p-4 border border-gray-200 rounded-lg hover:border-blue-300 hover:bg-blue-50 cursor-pointer transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${(v=n.tags)!=null&&v.includes("dev_stack_commands")?"bg-purple-500":"bg-green-500"}`}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("h4",{className:"font-mono text-sm text-gray-900",children:[n.uuid.substring(0,8),"..."]}),((z=n.tags)==null?void 0:z.includes("dev_stack_commands"))&&e.jsx("span",{className:"px-2 py-1 text-xs bg-purple-100 text-purple-800 rounded-full",children:"Dev Stack"}),((U=n.tags)==null?void 0:U.includes("orchestration_capable"))&&e.jsx("span",{className:"px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full",children:"Orchestration"})]}),e.jsx("p",{className:"text-xs text-gray-500",children:E(n.size)}),n.content_preview&&e.jsxs("p",{className:"text-xs text-gray-600 mt-1 truncate max-w-md",children:[n.content_preview.substring(0,100),"..."]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-500",children:[e.jsx(se,{className:"w-4 h-4"}),e.jsx("span",{children:q(n.modTime)})]}),e.jsxs("div",{className:"flex items-center space-x-1 mt-1",children:[e.jsx(he,{className:"w-4 h-4 text-gray-400"}),((B=n.tags)==null?void 0:B.includes("dev_stack_commands"))&&e.jsx("button",{onClick:t=>{t.stopPropagation(),x&&x({type:"get_session_content",session_uuid:n.uuid})},className:"ml-2 px-2 py-1 text-xs bg-purple-600 text-white rounded hover:bg-purple-700",children:e.jsx(ge,{className:"w-3 h-3"})})]})]})]}),n.latestTodos&&e.jsxs("div",{className:"mt-2 text-xs text-gray-600",children:["Latest todos: ",((G=n.latestTodos.todos)==null?void 0:G.length)||0," items"]})]},n.uuid)})})]})]})};var cs={};const de=cs.NEXT_PUBLIC_API_GENERATOR_URL||"http://localhost:8082",is=()=>{const[l,m]=r.useState("upload"),[d,g]=r.useState(null),[c,p]=r.useState(null),[h,f]=r.useState("both"),[i,_]=r.useState([]),[C,u]=r.useState(!1),[M,A]=r.useState(!1),[T,P]=r.useState(!1),[D,S]=r.useState(""),R=r.useCallback(async o=>{var N;const x=(N=o.target.files)==null?void 0:N[0];if(x)try{const y=await x.text(),b=JSON.parse(y),$={name:x.name.replace(".json",""),content:y,version:b.openapi||b.swagger||"3.0.0",servers:b.servers||[],info:b.info||{title:"API",version:"1.0.0"}};g($),L($)}catch(y){console.error("Failed to parse OpenAPI spec:",y),alert("Invalid OpenAPI specification file")}},[]),I=r.useCallback(o=>{var x;try{const N=JSON.parse(o),y={name:((x=N.info)==null?void 0:x.title)||"API",content:o,version:N.openapi||N.swagger||"3.0.0",servers:N.servers||[],info:N.info||{title:"API",version:"1.0.0"}};g(y),L(y)}catch(N){console.error("Failed to parse OpenAPI spec:",N)}},[]),L=async o=>{u(!0);try{const x=await fetch(`${de}/validate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({spec:JSON.parse(o.content)})});if(!x.ok)throw new Error("Validation failed");const N=await x.json();p(N)}catch(x){p({valid:!1,errors:[x instanceof Error?x.message:"Validation failed"],warnings:[],info:{paths:0,operations:0,schemas:0}})}finally{u(!1)}},O=async()=>{if(!d||!(c!=null&&c.valid))return;A(!0),_([]);const o=h==="both"?["python","nodejs"]:[h];try{const N=(await Promise.allSettled(o.map(async y=>{const b=await fetch(`${de}/generate/${y}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({spec:JSON.parse(d.content),options:{serverName:d.name,generateTests:!0,includeDocumentation:!0}})});if(!b.ok)throw new Error(`${y} generation failed`);const $=await b.json();return{generator:y,success:!0,output:$.output,timestamp:new Date,mcpServer:$.mcpServer}}))).map((y,b)=>y.status==="fulfilled"?y.value:{generator:o[b],success:!1,error:y.reason.message,timestamp:new Date});_(N)}catch(x){console.error("Generation failed:",x)}finally{A(!1)}},a=async()=>{const o=i.filter(x=>x.success&&x.mcpServer);if(o.length!==0){P(!0),S("Preparing deployment...");try{for(const x of o)if(S(`Deploying ${x.generator} MCP server...`),!(await fetch(`${de}/deploy`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({generator:x.generator,mcpServer:x.mcpServer,autoStart:!0})})).ok)throw new Error(`Failed to deploy ${x.generator} server`);S("All MCP servers deployed successfully!"),setTimeout(()=>S(""),3e3)}catch(x){S(`Deployment failed: ${x instanceof Error?x.message:"Unknown error"}`),setTimeout(()=>S(""),5e3)}finally{P(!1)}}},k=o=>{if(!o.output)return;const x=new Blob([o.output],{type:"application/zip"}),N=URL.createObjectURL(x),y=document.createElement("a");y.href=N,y.download=`${d==null?void 0:d.name}-${o.generator}-mcp-server.zip`,document.body.appendChild(y),y.click(),document.body.removeChild(y),URL.revokeObjectURL(N)};return e.jsxs("div",{className:"api-generator",children:[e.jsxs("div",{className:"card",style:{gridColumn:"1 / -1"},children:[e.jsxs("div",{className:"card-header",children:[e.jsxs("h2",{className:"card-title",children:[e.jsx(ne,{size:20}),"API Generator - OpenAPI to MCP"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded",children:"@cnoe-io/openapi-mcp-codegen"}),e.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded",children:"@harsha-iiiv/openapi-mcp-generator"})]})]}),e.jsxs("div",{className:"card-content",children:[e.jsx("p",{children:"Convert OpenAPI specifications to Model Context Protocol (MCP) servers with Python and Node.js generators"}),e.jsx("div",{className:"mt-4 border-b",children:e.jsx("nav",{className:"flex space-x-8",children:[{id:"upload",label:"Upload & Validate",icon:je},{id:"generate",label:"Generate MCP",icon:ee},{id:"deploy",label:"Deploy Servers",icon:H}].map(({id:o,label:x,icon:N})=>e.jsxs("button",{onClick:()=>m(o),className:`flex items-center gap-2 py-2 px-1 border-b-2 font-medium text-sm ${l===o?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[e.jsx(N,{size:16}),x]},o))})})]})]}),l==="upload"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h3",{className:"card-title",children:[e.jsx(je,{size:18}),"Upload OpenAPI Specification"]})}),e.jsx("div",{className:"card-content",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Upload JSON File"}),e.jsx("input",{type:"file",accept:".json,.yaml,.yml",onChange:R,className:"w-full"})]}),e.jsx("div",{className:"text-center text-gray-500",children:"— OR —"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Paste OpenAPI JSON"}),e.jsx("textarea",{rows:10,className:"w-full font-mono text-sm",placeholder:"Paste your OpenAPI 3.x JSON specification here...",onChange:o=>I(o.target.value)})]})]})})]}),d&&e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h3",{className:"card-title",children:[e.jsx(Xe,{size:18}),"Specification Details"]})}),e.jsx("div",{className:"card-content",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Name"}),e.jsx("p",{className:"text-sm text-gray-600",children:d.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Version"}),e.jsx("p",{className:"text-sm text-gray-600",children:d.info.version})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"OpenAPI Version"}),e.jsx("p",{className:"text-sm text-gray-600",children:d.version})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Servers"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[d.servers.length," defined"]})]})]}),d.info.description&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Description"}),e.jsx("p",{className:"text-sm text-gray-600",children:d.info.description})]})]})})]}),C&&e.jsx("div",{className:"card",children:e.jsx("div",{className:"card-content",children:e.jsxs("div",{className:"flex items-center justify-center py-4",children:[e.jsx(oe,{size:20,className:"animate-spin text-blue-500 mr-2"}),e.jsx("span",{children:"Validating OpenAPI specification..."})]})})}),c&&e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h3",{className:"card-title",children:[c.valid?e.jsx(Y,{size:18,className:"text-green-500"}):e.jsx(Q,{size:18,className:"text-red-500"}),"Validation Results"]})}),e.jsx("div",{className:"card-content",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:`p-3 rounded ${c.valid?"bg-green-50 border border-green-200 text-green-700":"bg-red-50 border border-red-200 text-red-700"}`,children:e.jsxs("div",{className:"flex items-center",children:[c.valid?e.jsx(Y,{size:16,className:"mr-2"}):e.jsx(Q,{size:16,className:"mr-2"}),e.jsx("span",{className:"font-medium",children:c.valid?"Valid OpenAPI Specification":"Invalid OpenAPI Specification"})]})}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"metric",children:[e.jsx("div",{className:"metric-value text-blue-500",children:c.info.paths}),e.jsx("div",{className:"metric-label",children:"Paths"})]}),e.jsxs("div",{className:"metric",children:[e.jsx("div",{className:"metric-value text-green-500",children:c.info.operations}),e.jsx("div",{className:"metric-label",children:"Operations"})]}),e.jsxs("div",{className:"metric",children:[e.jsx("div",{className:"metric-value text-purple-500",children:c.info.schemas}),e.jsx("div",{className:"metric-label",children:"Schemas"})]})]}),c.errors.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-red-700 mb-2",children:"Errors:"}),e.jsx("ul",{className:"space-y-1",children:c.errors.map((o,x)=>e.jsxs("li",{className:"text-sm text-red-600 flex items-start",children:[e.jsx(Q,{size:14,className:"mr-2 mt-0.5 flex-shrink-0"}),o]},x))})]}),c.warnings.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-yellow-700 mb-2",children:"Warnings:"}),e.jsx("ul",{className:"space-y-1",children:c.warnings.map((o,x)=>e.jsxs("li",{className:"text-sm text-yellow-600 flex items-start",children:[e.jsx(ae,{size:14,className:"mr-2 mt-0.5 flex-shrink-0"}),o]},x))})]})]})})]})]}),l==="generate"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h3",{className:"card-title",children:[e.jsx(ce,{size:18}),"Generator Configuration"]})}),e.jsx("div",{className:"card-content",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Select Generator"}),e.jsx("div",{className:"space-y-2",children:[{value:"python",label:"Python (@cnoe-io/openapi-mcp-codegen)",description:"FastAPI-based MCP server with Python"},{value:"nodejs",label:"Node.js (@harsha-iiiv/openapi-mcp-generator)",description:"Express-based MCP server with TypeScript"},{value:"both",label:"Both Generators",description:"Generate both Python and Node.js implementations"}].map(o=>e.jsxs("label",{className:"flex items-start space-x-3 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"generator",value:o.value,checked:h===o.value,onChange:x=>f(x.target.value),className:"mt-1"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:o.label}),e.jsx("div",{className:"text-sm text-gray-600",children:o.description})]})]},o.value))})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:d?`Ready to generate MCP server for "${d.name}"`:"No OpenAPI specification loaded"}),c&&!c.valid&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:"Please fix validation errors before generating"})]}),e.jsx("button",{onClick:O,disabled:!d||!(c!=null&&c.valid)||M,className:"btn btn-primary",children:M?e.jsxs(e.Fragment,{children:[e.jsx(oe,{size:16,className:"animate-spin mr-2"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ie,{size:16,className:"mr-2"}),"Generate MCP Servers"]})})]})]})})]}),i.length>0&&e.jsxs("div",{className:"card",style:{gridColumn:"1 / -1"},children:[e.jsx("div",{className:"card-header",children:e.jsxs("h3",{className:"card-title",children:[e.jsx(ne,{size:18}),"Generation Results"]})}),e.jsx("div",{className:"card-content",children:e.jsx("div",{className:"space-y-4",children:i.map((o,x)=>e.jsxs("div",{className:`p-4 border rounded ${o.success?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center",children:[o.success?e.jsx(Y,{size:20,className:"text-green-500 mr-2"}):e.jsx(Q,{size:20,className:"text-red-500 mr-2"}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium capitalize",children:[o.generator," Generator"]}),e.jsx("p",{className:"text-sm text-gray-600",children:o.timestamp.toLocaleString()})]})]}),o.success&&o.output&&e.jsxs("button",{onClick:()=>k(o),className:"btn btn-secondary text-xs",children:[e.jsx(Ke,{size:12,className:"mr-1"}),"Download"]})]}),o.success&&o.mcpServer&&e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Server Name"}),e.jsx("p",{className:"text-sm text-gray-600",children:o.mcpServer.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Port"}),e.jsx("p",{className:"text-sm text-gray-600",children:o.mcpServer.port})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Endpoints"}),e.jsxs("p",{className:"text-sm text-gray-600",children:[o.mcpServer.endpoints.length," endpoints"]})]})]}),o.error&&e.jsx("div",{className:"text-sm text-red-600 font-mono bg-red-100 p-2 rounded",children:o.error})]},x))})})]})]}),l==="deploy"&&e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h3",{className:"card-title",children:[e.jsx(H,{size:18}),"Deploy MCP Servers"]})}),e.jsx("div",{className:"card-content",children:e.jsx("div",{className:"space-y-4",children:i.filter(o=>o.success).length>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Deploy the generated MCP servers to the local environment for immediate use."}),e.jsx("div",{className:"space-y-3",children:i.filter(o=>o.success).map((o,x)=>{var N,y;return e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium capitalize",children:[o.generator," MCP Server"]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[(N=o.mcpServer)==null?void 0:N.name," on port ",(y=o.mcpServer)==null?void 0:y.port]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded",children:"Ready"})})]},x)})})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",children:[e.jsx("div",{children:D&&e.jsx("p",{className:"text-sm text-blue-600",children:D})}),e.jsx("button",{onClick:a,disabled:T,className:"btn btn-primary",children:T?e.jsxs(e.Fragment,{children:[e.jsx(oe,{size:16,className:"animate-spin mr-2"}),"Deploying..."]}):e.jsxs(e.Fragment,{children:[e.jsx(H,{size:16,className:"mr-2"}),"Deploy All Servers"]})})]})]}):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(H,{size:48,className:"mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-lg font-medium mb-2",children:"No Servers Ready for Deployment"}),e.jsx("p",{className:"text-sm mb-4",children:"Generate MCP servers first before deploying them."}),e.jsx("button",{onClick:()=>m("generate"),className:"btn btn-primary",children:"Go to Generator"})]})})})]})]})},ls=new Ee;function os(){const[l,m]=r.useState({active:0,total:28}),[d,g]=r.useState({completed:0,total:0}),[c,p]=r.useState({triggered:0,total:28}),[h,f]=r.useState(""),{data:i,isConnected:_}=Ce("ws://localhost:8081/ws",{reconnectInterval:1e3,heartbeatInterval:100});return r.useEffect(()=>{i&&(i.type==="agent-update"?m(i.payload):i.type==="task-update"?g(i.payload):i.type==="hook-update"?p(i.payload):i.type==="audio-event"&&f(i.payload.file))},[i]),e.jsx(Ae,{client:ls,children:e.jsx(ze,{children:e.jsxs("div",{className:"app",children:[e.jsx(Ye,{agents:l,tasks:d,hooks:c,lastAudio:h,isConnected:_}),e.jsx(Ze,{}),e.jsx("main",{className:"main-content",children:e.jsxs(Me,{children:[e.jsx(X,{path:"/",element:e.jsx(es,{agents:l})}),e.jsx(X,{path:"/tasks",element:e.jsx(ss,{tasks:d})}),e.jsx(X,{path:"/audio",element:e.jsx(ts,{lastAudio:h})}),e.jsx(X,{path:"/mcp",element:e.jsx(rs,{})}),e.jsx(X,{path:"/browser",element:e.jsx(ns,{})}),e.jsx(X,{path:"/api-generator",element:e.jsx(is,{})})]})})]})})})}const ds="modulepreload",ms=function(l){return"/"+l},fe={},xs=function(m,d,g){let c=Promise.resolve();if(d&&d.length>0){document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),f=(h==null?void 0:h.nonce)||(h==null?void 0:h.getAttribute("nonce"));c=Promise.allSettled(d.map(i=>{if(i=ms(i),i in fe)return;fe[i]=!0;const _=i.endsWith(".css"),C=_?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${C}`))return;const u=document.createElement("link");if(u.rel=_?"stylesheet":ds,_||(u.as="script"),u.crossOrigin="",u.href=i,f&&u.setAttribute("nonce",f),document.head.appendChild(u),_)return new Promise((M,A)=>{u.addEventListener("load",M),u.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${i}`)))})}))}function p(h){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=h,window.dispatchEvent(f),!f.defaultPrevented)throw h}return c.then(h=>{for(const f of h||[])f.status==="rejected"&&p(f.reason);return m().catch(p)})};function us(l={}){const{immediate:m=!1,onNeedRefresh:d,onOfflineReady:g,onRegistered:c,onRegisteredSW:p,onRegisterError:h}=l;let f,i;const _=async(u=!0)=>{await i};async function C(){if("serviceWorker"in navigator){if(f=await xs(async()=>{const{Workbox:u}=await import("./workbox-window.prod.es5-B9K5rw8f.js");return{Workbox:u}},[]).then(({Workbox:u})=>new u("/sw.js",{scope:"/",type:"classic"})).catch(u=>{h==null||h(u)}),!f)return;f.addEventListener("activated",u=>{(u.isUpdate||u.isExternal)&&window.location.reload()}),f.addEventListener("installed",u=>{u.isUpdate||g==null||g()}),f.register({immediate:m}).then(u=>{p?p("/sw.js",u):c==null||c(u)}).catch(u=>{h==null||h(u)})}}return i=C(),_}const hs=us({onNeedRefresh(){console.log("🔄 New content available, refreshing..."),hs(!0)},onOfflineReady(){console.log("✅ App ready to work offline"),ps()},onRegistered(l){console.log("✅ Service Worker registered:",l)},onRegisterError(l){console.error("❌ Service Worker registration error:",l)}});function ps(){const l=document.createElement("div");l.innerHTML=`
    <div style="position: fixed; bottom: 20px; left: 20px; background: #10b981; color: white; padding: 12px 16px; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.3); z-index: 1002; font-size: 14px;">
      ✅ App is ready to work offline!
    </div>
  `,document.body.appendChild(l),setTimeout(()=>{l.remove()},3e3)}window.addEventListener("online",()=>{console.log("🌐 Back online"),Pe("online")});window.addEventListener("offline",()=>{console.log("📴 Gone offline"),Pe("offline")});function Pe(l){const m=document.createElement("div"),d=l==="online";m.innerHTML=`
    <div style="position: fixed; top: 20px; left: 20px; background: ${d?"#10b981":"#ef4444"}; color: white; padding: 12px 16px; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.3); z-index: 1002; font-size: 14px;">
      ${d?"🌐 Back online":"📴 You are offline"}
    </div>
  `,document.body.appendChild(m),setTimeout(()=>{m.remove()},2e3)}"performance"in window&&window.addEventListener("load",()=>{var m,d;const l=performance.getEntriesByType("navigation")[0];console.log("📊 Page Load Performance:",{domContentLoaded:l.domContentLoadedEventEnd-l.domContentLoadedEventStart,loadComplete:l.loadEventEnd-l.loadEventStart,firstPaint:(m=performance.getEntriesByName("first-paint")[0])==null?void 0:m.startTime,firstContentfulPaint:(d=performance.getEntriesByName("first-contentful-paint")[0])==null?void 0:d.startTime})});class gs extends Ne.Component{constructor(m){super(m),this.state={hasError:!1}}static getDerivedStateFromError(m){return{hasError:!0,error:m}}componentDidCatch(m,d){console.error("PWA Error Boundary caught an error:",m,d)}render(){return this.state.hasError?e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",padding:"20px",textAlign:"center",backgroundColor:"#1a1b26",color:"white"},children:[e.jsx("h1",{style:{marginBottom:"20px"},children:"Something went wrong"}),e.jsx("p",{style:{marginBottom:"20px",opacity:.7},children:"The application encountered an error. Please try refreshing the page."}),e.jsx("button",{onClick:()=>window.location.reload(),style:{background:"#007acc",color:"white",border:"none",padding:"12px 24px",borderRadius:"6px",cursor:"pointer",fontSize:"16px"},children:"Refresh App"})]}):this.props.children}}me.createRoot(document.getElementById("root")).render(e.jsx(Ne.StrictMode,{children:e.jsx(gs,{children:e.jsx(os,{})})}));
//# sourceMappingURL=index-qObnXoUI.js.map
